# 26. Finding and Reducing Bottlenecks

## 26.1 Should You Even Care?

명심해야 할 점은 이른 최적화는 좋지 않다는 것이다. 아직 사이트의 규모가 크지않고 잘 로딩되고 있다면, 이 챕터는 넘어가도 좋다.

## 26.2 Speed Up Query-Heavy Pages

너무 많고 충분히 원활하지 않은 쿼리들로 인한 병목 현상을 어떻게 줄이는지 알아보자.

추가로 Django 공식 문서에서 데이터베이스 액세스 최적화에 대해 읽어 보길 바란다.

참조: https://docs.djangoproject.com/en/3.2/topics/db/optimization/

### 26.2.1 Find Excessive Queries With Django Debug Toolbar

**django-debug-toolbar**를 사용하면 대부분의 쿼리가 발생하는 곳을 확인하는데 도움이 된다. 다음과 같은 병목 현상을 찾을 수 있을 것이다.

- 한 페이지 내에서 중복되는 쿼리
- 예상보다 더 많은 쿼리를 호출하는 ORM 호출
- Slow queries

아마 최적화가 필요한 URL이 대략적으로 떠오를 것이다. 딱 봐도 로딩이 느린 페이지 라던가..

아직 django-debug-toolbar가 없다면 로컬에 설치하라. 웹 브라우저에서 프로젝트를 보고 SQL 패널을 확장하고, 현재 페이지에 포함된 쿼리 수를 확인할 수 있다.